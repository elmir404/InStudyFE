@section Css{
    <link rel="stylesheet" href="https://unpkg.com/multiple-select@1.5.2/dist/multiple-select.min.css">
}
<div class="main-content app-content mt-0">
    <div class="side-app">

        <!-- CONTAINER -->
        <div class="main-container container-fluid">

            <!-- PAGE-HEADER -->
            <div class="page-header">
                <h1 class="page-title">Add University</h1>
                <div>
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="javascript:void(0)">Pages</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Add University</li>
                    </ol>
                </div>
            </div>
            <!-- PAGE-HEADER END -->
            <!-- ROW-1 OPEN -->
            <div class="row">
                <div class="col-lg-12">
                    <form id="form" class="card">
                        <div class="card-header">
                            <div class="card-title">Add University</div>
                        </div>
                        <div class="card-body">
                            <div class="row mb-4">
                                <label class="col-md-3 form-label">Az Title :</label>
                                <div class="col-md-9">
                                    <input type="text" id="azHeader" class="form-control" placeholder="Title Name">
                                </div>
                            </div>
                            <div class="row mb-4">
                                <label class="col-md-3 form-label">Ru Title :</label>
                                <div class="col-md-9">
                                    <input type="text" id="ruHeader" class="form-control">
                                </div>
                            </div>
                            <div class="row mb-4">
                                <label class="col-md-3 form-label">En Title :</label>
                                <div class="col-md-9">
                                    <input type="text" id="enHeader" class="form-control">
                                </div>
                            </div>
                            <div class="row mb-4">
                                <label class="col-md-3 form-label">Adress :</label>
                                <div class="col-md-9">
                                    <input type="text" id="uniAdrress" class="form-control">
                                </div>
                            </div>
                          

                            <!-- Row -->
                            <div class="row">
                                <label class="col-md-3 form-label mb-4">Az Description :</label>
                                <div class="col-md-9 mb-4">
                                    <textarea class="content" id="azDescription" name="example"></textarea>
                                </div>
                            </div>
                            <div class="row">
                                <label class="col-md-3 form-label mb-4">Ru Description :</label>
                                <div class="col-md-9 mb-4">
                                    <textarea class="content2" id="ruDescription" name="example"></textarea>
                                </div>
                            </div> 
                            <div class="row">
                                <label class="col-md-3 form-label mb-4">En Description :</label>
                                <div class="col-md-9 mb-4">
                                    <textarea class="content3" id="enDescription" name="example"></textarea>
                                </div>
                            </div> 
                            <div class="row">
                                <label class="col-md-3 form-label mb-4">Az Bachelor :</label>
                                <div class="col-md-9 mb-4">
                                    <textarea class="content4" id="azBachelor" name="example"></textarea>
                                </div>
                            </div>
                            <div class="row">
                                <label class="col-md-3 form-label mb-4">Ru Bachelor :</label>
                                <div class="col-md-9 mb-4">
                                        <textarea class="content5" id="ruBachelor" name="example"></textarea>
                                </div>
                            </div> 
                            <div class="row">
                                <label class="col-md-3 form-label mb-4">En Bachelor :</label>
                                <div class="col-md-9 mb-4">
                                        <textarea class="content6" id="enBachelor" name="example"></textarea>
                                </div>
                            </div>
                            <div class="row">
                                <label class="col-md-3 form-label mb-4">Az Master :</label>
                                <div class="col-md-9 mb-4">
                                        <textarea class="content7" id="azMaster" name="example"></textarea>
                                </div>
                            </div>
                            <div class="row">
                                <label class="col-md-3 form-label mb-4">Ru Bachelor :</label>
                                <div class="col-md-9 mb-4">
                                        <textarea class="content8" id="ruMaster" name="example"></textarea>
                                </div>
                            </div> 
                            <div class="row">
                                    <label class="col-md-3 form-label mb-4">En Master :</label>
                                <div class="col-md-9 mb-4">
                                        <textarea class="content9" id="enMaster" name="example"></textarea>
                                </div>
                            </div>
                              <div class="row">
                                <label class="col-md-3 form-label mb-4">Direction</label>
                                        <div class="col-md-9 mb-4">
                                            <select multiple="multiple" id="direction">
                                            </select>
                                        </div>
                            </div>
                            <div class="row">
                                <label class="col-md-3 form-label mb-4">Program</label>
                                <div class="col-md-9 mb-4">
                                    <select multiple="multiple" id="program" >
                                        
                                        
                                    </select>
                                </div>
                            </div> 
                           
                                <div class="row">
                                    <label class="col-md-3 form-label mb-4">Country</label>
                                    <div class="col-md-9 mb-4">
                                        <select  id="country">
                                        </select>
                                    </div>
                                </div>
                            <!--End Row-->
                            <!--Row-->
                            <div class="row">
                                <label class="col-md-3 form-label mb-4">University File Upload :</label>
                                <div class="col-md-9">
                                        <input id="files" type="file" onchange="document.getElementById('output').src = window.URL.createObjectURL(this.files[0])" name="files" accept=".jpg, .png, image/jpeg, image/png">
                                        <img id="output" src="" width="100" height="100">
                                </div>
                            </div>
                            <!--End Row-->
                        </div>
                        <div class="card-footer">
                            <!--Row-->
                            <div class="row">
                              
                                <div class="col-md-9">
                                        <a href="javascript:void(0)" id="addUniversty" class="btn btn-primary">Add University</a>
                                </div>
                                  <div class="col-md-3"> 
                                      <button type="button" id="specialityBtn" class="btn btn-success mb-4 data-table-btn" style="display:none;"data-bs-toggle="modal" data-bs-target="#exampleModal">
                                                Add Speciality
                                            </button>
                                            <!-- Modal -->
                                      </div>
                            </div>
                            <!--End Row-->
                        </div>
                    </form>
                </div>
            </div>
            <!-- /ROW-1 CLOSED -->
        </div>
        <!-- CONTAINER CLOSED -->
    </div>
</div>
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add Specaility</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <div class="md-form mb-5">
                        <label data-error="wrong" data-success="right" for="form34">University Id</label>
                        <input type="number" id="universityId">
                    </div>
                    <div class="md-form mb-5">
                        <label data-error="wrong" data-success="right" for="form34">Specialities</label>
                        <select name="claimName" multiple="multiple" id="specialityList">
                          
                        </select>
                    </div>
                    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" id="addUniSpec" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

@section Scripts{
    <script src="~/AdminFiles/js/university.js"></script>
    <script src="https://unpkg.com/multiple-select@1.5.2/dist/multiple-select.min.js"></script>
    <script>
       
        $.ajax({
            type: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*',

            },
            url: `https://api.instudy.net/api/Program/GetPrograms`,

            success: function (data) {
                var html = [];
                $.each(
                    data.data, function (i, value) {
                        html.push(
                            `
                                                            <option value="${value.id}">${value.enName}</option>

                                                         `
                        )

                    }
                )
                $('#program').html(html.join('')).multipleSelect();
            }

        });
        $.ajax({
            type: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*',

            },
            url: `https://api.instudy.net/api/Country/GetActiveCountries`,

            success: function (data) {
                var html = [];
                $.each(
                    data.data, function (i, value) {
                        html.push(
                            `
                                                                    <option value="${value.id}">${value.enName}</option>

                                                                 `
                        )

                    }
                )
                $('#country').html(html.join(''));
            }

        });
        $.ajax({
            type: 'GET',
            headers: {
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*',

            },
            url: `https://api.instudy.net/api/Direction/GetActiveDirections`,

            success: function (data) {
                var html = [];
                $.each(
                    data.data, function (i, value) {
                        html.push(
                            `
                                                            <option value="${value.id}">${value.enName}</option>

                                                         `
                        )

                    }
                )
                $('#direction').html(html.join('')).multipleSelect();
            }

        });
    </script>
    <script>
        $(document).ready(function () {
            $(document).on('change', '#azHeader', function () {
                debugger;
                $("#form").data("changed", true);
            });
            $(document).on('change', '#enHeader', function () {
                debugger;
                $("#form").data("changed", true);
            });
            $(document).on('change', '#ruHeader', function () {
                debugger;
                $("#form").data("changed", true);
            });
            $(document).on('change', '#files', function () {
                debugger;
                $("#form").data("changed", true);
            });
            $(document).on('change', '#direction', function () {
                debugger;
                $("#form").data("changed", true);
            });
            $(document).on('change', '#country', function () {
                debugger;
                $("#form").data("changed", true);
            }); 
            $(document).on('change', '#program', function () {
                debugger;
                $("#form").data("changed", true);
            });
            $(document).on('change', '#uniAdrress', function () {
                debugger;
                $("#form").data("changed", true);
            });
        var isClicked = false;
        $('#addUniversty').on('click', function (evt) {
            debugger;
            isClicked = true;
        });
        debugger;

        window.addEventListener("beforeunload", function (e) {
            var confirmationMessage = 'It looks like you have been editing something. '
                + 'If you leave before saving, your changes will be lost.';
                if ($('#azDescription').val() != '') {
                    $("#form").data("changed", true);
                }
                if ($('#enDescription').val() != '') {
                    $("#form").data("changed", true);
                }
                if ($('#ruDescription').val() != '') {
                    $("#form").data("changed", true);
                }
                if ($('#azBachelor').val() != '') {
                    $("#form").data("changed", true);
                }
                if ($('#enBachelor').val() != '') {
                    $("#form").data("changed", true);
                }
                if ($('#ruBachelor').val() != '') {
                    $("#form").data("changed", true);
                }
                if ($('#azMaster').val() != '') {
                    $("#form").data("changed", true);
                }
                if ($('#enMaster').val() != '') {
                    $("#form").data("changed", true);
                }
                if ($('#ruMaster').val() != '') {
                    $("#form").data("changed", true);
                }
           
            debugger;
            if ($("#form").data("changed") && isClicked == false) {
                (e || window.event).returnValue = confirmationMessage; //Gecko + IE
                return confirmationMessage;

            }

            //Gecko + Webkit, Safari, Chrome etc.
        });
        });






    </script>
}